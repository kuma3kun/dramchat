{"version":3,"sources":["../src/opal.js"],"names":["OpalFunctionPrototype","FunctionPrototype","Function","prototype","FunctionPrototypeKeys","Object","keys","Opal","require","forEach","indexOf","key","up","assign","down","module","exports","opal","callback","result","e"],"mappings":";;AAAA,IAAMA,wBAAwB,EAA9B;AACA,IAAMC,oBAAoBC,SAASC,SAAnC;AACA,IAAMC,wBAAwBC,OAAOC,IAAP,CAAYL,iBAAZ,CAA9B;;AAEA;AACA,IAAMM,OAAOC,QAAQ,qBAAR,CAAb;AACAH,OAAOC,IAAP,CAAYJ,SAASC,SAArB,EAAgCM,OAAhC,CAAwC,eAAO;AAC3C,QAAIL,sBAAsBM,OAAtB,CAA8BC,GAA9B,IAAqC,CAAzC,EAA4C;AACxCX,8BAAsBW,GAAtB,IAA6BT,SAASC,SAAT,CAAmBQ,GAAnB,CAA7B;AACA,eAAOT,SAASC,SAAT,CAAmBQ,GAAnB,CAAP;AACH;AACJ,CALD;;AAOA,SAASC,EAAT,GAAc;AACVP,WAAOQ,MAAP,CAAcX,SAASC,SAAvB,EAAkCH,qBAAlC;AACH;AACD,SAASc,IAAT,GAAgB;AACZT,WAAOC,IAAP,CAAYJ,SAASC,SAArB,EAAgCM,OAAhC,CAAwC,eAAO;AAC3C,YAAIL,sBAAsBM,OAAtB,CAA8BC,GAA9B,IAAqC,CAAzC,EAA4C,OAAOT,SAASC,SAAT,CAAmBQ,GAAnB,CAAP;AAC/C,KAFD;AAGH;;AAEDI,OAAOC,OAAP,GAAiB,SAASC,IAAT,CAAcC,QAAd,EAAwB;AACrC,QAAI;AACAN;;AAEA;AACA,YAAMO,SAASD,SAASX,IAAT,CAAf;;AAEAO;;AAEA,eAAOK,MAAP;AACH,KATD,CASE,OAAOC,CAAP,EAAU;AACRN;AACA,cAAMM,CAAN;AACH;AACJ,CAdD","file":"opal.js","sourcesContent":["const OpalFunctionPrototype = {};\nconst FunctionPrototype = Function.prototype;\nconst FunctionPrototypeKeys = Object.keys(FunctionPrototype);\n\n// eslint-disable-next-line\nconst Opal = require('../lib/opal.ruby.js');\nObject.keys(Function.prototype).forEach(key => {\n    if (FunctionPrototypeKeys.indexOf(key) < 0) {\n        OpalFunctionPrototype[key] = Function.prototype[key];\n        delete Function.prototype[key];\n    }\n});\n\nfunction up() {\n    Object.assign(Function.prototype, OpalFunctionPrototype);\n}\nfunction down() {\n    Object.keys(Function.prototype).forEach(key => {\n        if (FunctionPrototypeKeys.indexOf(key) < 0) delete Function.prototype[key];\n    });\n}\n\nmodule.exports = function opal(callback) {\n    try {\n        up();\n\n        // eslint-disable-next-line\n        const result = callback(Opal);\n\n        down();\n\n        return result;\n    } catch (e) {\n        down();\n        throw e;\n    }\n};\n"]}